"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-store",DNT:"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0"},getMeta=({link:link,providerContext:providerContext})=>{const{axios:axios,cheerio:cheerio}=providerContext,baseUrl=link.split("/").slice(0,3).join("/"),empty={title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]};return axios.get(link,{headers:{...headers,Referer:baseUrl}}).then(({data:data})=>{var _a;const $=cheerio.load(data),body=$(".entry-inner, .entry-content, .post-inner").first();let title=$("h1").text().trim()||$("h2").first().text().trim()||$("h3:contains('Download')").first().text().trim();title=title.replace(/Download|~ Vegamovies3\.eu|â€“|\(.+\)/gi,"").trim();const imdbId=(null===(_a=($("a[href*='imdb.com/title/']").attr("href")||"").match(/tt\d+/))||void 0===_a?void 0:_a[0])||"";let image=body.find("img[data-src]").first().attr("data-src")||body.find("img[src]").first().attr("src")||"";image&&image.startsWith("//")&&(image="https:"+image);const info={title:title||"Unknown",synopsis:body.find("h3:contains('SYNOPSIS'), h3:contains('Plot')").next("p").text().trim()||$("p:contains('Movie-SYNOPSIS')").next("p").text().trim()||"",image:image,imdbId:imdbId,type:/season|episode/i.test(data)?"series":"movie",linkList:[]},links=[];return body.find("h3").each((_,el)=>{var _a;const qualityTitle=$(el).text().trim();if(!/\d+p/i.test(qualityTitle))return;const quality=(null===(_a=qualityTitle.match(/\d+p/))||void 0===_a?void 0:_a[0])||"",directLinks=[];$(el).nextUntil("h3").find("a").each((_,a)=>{const $a=$(a),anchorText=$a.text().trim()||$a.find("button").text().trim()||($a.attr("title")||"").trim()||($a.attr("aria-label")||"").trim(),linkHref=$a.attr("href")||"",isZee=/Zee-Cloud/i.test(anchorText),isV=/V-Cloud/i.test(anchorText),isBatch=/Batch\/Zip|Batch|Zip/i.test(anchorText)||$a.find("i.fa-file-zip-o, i[class*='file-zip']").length>0;(isZee||isV||isBatch)&&linkHref&&directLinks.push({title:anchorText||linkHref,link:linkHref,type:"series"})}),directLinks.length&&links.push({title:qualityTitle,quality:quality,episodesLink:directLinks[0].link,directLinks:directLinks})}),0===links.length&&$("h5").each((_,el)=>{var _a;const qTitle=$(el).text().trim();if(!/\d+p/i.test(qTitle))return;const quality=(null===(_a=qTitle.match(/\d+p/))||void 0===_a?void 0:_a[0])||"",directLinks=[],downloadParagraph=$(el).next("p"),nextBtn=downloadParagraph.find("a[href]").first();if(nextBtn.length){const href=nextBtn.attr("href"),btnText=nextBtn.text().trim()||nextBtn.find("button").text().trim()||(nextBtn.attr("title")||"").trim()||(nextBtn.attr("aria-label")||"").trim()||"Download Now";directLinks.push({title:btnText,link:href,type:"movie"})}downloadParagraph.find("a[href]").each((_,a)=>{const $a=$(a),linkHref=$a.attr("href")||"",btnText=$a.text().trim()||$a.find("button").text().trim()||($a.attr("title")||"").trim(),isBatch=/Batch\/Zip|Batch|Zip/i.test(btnText)||$a.find("i.fa-file-zip-o, i[class*='file-zip']").length>0,isAlready=directLinks.some(d=>d.link===linkHref);isBatch&&linkHref&&!isAlready&&directLinks.push({title:btnText||linkHref,link:linkHref,type:"movie"})}),directLinks.length&&links.push({title:qTitle,quality:quality,episodesLink:directLinks[0].link,directLinks:directLinks})}),info.linkList=links,info}).catch(err=>empty)};exports.getMeta=getMeta;