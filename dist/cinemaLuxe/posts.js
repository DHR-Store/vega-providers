"use strict";var __awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,s){function a(t){try{c(n.next(t))}catch(t){s(t)}}function o(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,o)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const getPosts=function(t){return __awaiter(this,arguments,void 0,function*({filter:t,page:e,signal:i,providerContext:n}){return posts({url:`${(yield n.getBaseUrl("cinemaLuxe"))+t}page/${e}/`,signal:i,providerContext:n})})};exports.getPosts=getPosts;const getSearchPosts=function(t){return __awaiter(this,arguments,void 0,function*({searchQuery:t,page:e,signal:i,providerContext:n}){return posts({url:`${yield n.getBaseUrl("cinemaLuxe")}/page/${e}/?s=${t}`,signal:i,providerContext:n})})};function posts(t){return __awaiter(this,arguments,void 0,function*({url:t,signal:e,providerContext:i}){try{const n=yield fetch(t,{headers:i.commonHeaders,signal:e}),r=yield n.text(),s=i.cheerio.load(r),a=[];return s(".item.tvshows,.item.movies").map((t,e)=>{const i=s(e).find(".poster").find("img").attr("alt"),n=s(e).find(".poster").find("a").attr("href"),r=s(e).find(".poster").find("img").attr("data-src");i&&n&&r&&a.push({title:i,link:n,image:r})}),s(".result-item").map((t,e)=>{const i=s(e).find(".thumbnail").find("img").attr("alt"),n=s(e).find(".thumbnail").find("a").attr("href"),r=s(e).find(".thumbnail").find("img").attr("data-src");i&&n&&r&&a.push({title:i,link:n,image:r})}),a}catch(t){return[]}})}exports.getSearchPosts=getSearchPosts;