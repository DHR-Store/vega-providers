"use strict";var __awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,a){function o(t){try{s(n.next(t))}catch(t){a(t)}}function l(t){try{s(n.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,l)}s((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=void 0;const getStream=function(t){return __awaiter(this,arguments,void 0,function*({link:t,providerContext:e}){var i,n,r;try{const{axios:a,getBaseUrl:o}=e,l=[],s=[],u=yield o("kissKh"),d="https://adorable-salamander-ecbb21.netlify.app/api/kisskh/video?id="+t,v=yield a.get(d),c=null===(n=null===(i=v.data)||void 0===i?void 0:i.source)||void 0===n?void 0:n.Video,p=null===(r=v.data)||void 0===r?void 0:r.subtitles;return null==p||p.map(t=>{var e;s.push({title:null==t?void 0:t.label,language:null==t?void 0:t.land,type:(null===(e=null==t?void 0:t.src)||void 0===e?void 0:e.includes(".vtt"))?"text/vtt":"application/x-subrip",uri:null==t?void 0:t.src})}),l.push({server:"kissKh",link:c,type:"m3u8",subtitles:s,headers:{referer:u}}),l}catch(t){return[]}})};exports.getStream=getStream;