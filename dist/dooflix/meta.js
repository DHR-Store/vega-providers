"use strict";var __awaiter=this&&this.__awaiter||function(i,e,t,n){return new(t||(t=Promise))(function(l,o){function d(i){try{u(n.next(i))}catch(i){o(i)}}function s(i){try{u(n.throw(i))}catch(i){o(i)}}function u(i){var e;i.done?l(i.value):(e=i.value,e instanceof t?e:new t(function(i){i(e)})).then(d,s)}u((n=n.apply(i,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={"Accept-Encoding":"gzip","API-KEY":"2pm95lc6prpdbk0ppji9rsqo",Connection:"Keep-Alive","If-Modified-Since":"Wed, 14 Aug 2024 13:00:04 GMT","User-Agent":"okhttp/3.14.9"},getMeta=function(i){return __awaiter(this,arguments,void 0,function*({link:i,providerContext:e}){var t,n,l,o;try{const{axios:d}=e,s=(yield d.get(i,{headers:headers})).data,u=null==s?void 0:s.indexOf("{"),r=(null==s?void 0:s.lastIndexOf("}"))+1,a=(null===(t=null===JSON||void 0===JSON?void 0:JSON.parse(null==s?void 0:s.substring(u,r)))||void 0===t?void 0:t.title)?null===JSON||void 0===JSON?void 0:JSON.parse(null==s?void 0:s.substring(u,r)):s,v=(null==a?void 0:a.title)||"",p=(null==a?void 0:a.description)||"",c=(null==a?void 0:a.poster_url)||"",g=(null==a?void 0:a.cast)||[],h=(null==a?void 0:a.imdb_rating)||"",m=Number(null==a?void 0:a.is_tvseries)?"series":"movie",f=(null===(n=null==a?void 0:a.genre)||void 0===n?void 0:n.map(i=>null==i?void 0:i.name))||[],_=[];return"series"===m?null===(l=null==a?void 0:a.season)||void 0===l||l.map(i=>{var e;const t=(null==i?void 0:i.seasons_name)||"",n=(null===(e=null==i?void 0:i.episodes)||void 0===e?void 0:e.map(i=>({title:null==i?void 0:i.episodes_name,link:null==i?void 0:i.file_url})))||[];_.push({title:t,directLinks:n})}):null===(o=null==a?void 0:a.videos)||void 0===o||o.map(i=>{_.push({title:v+" "+(null==i?void 0:i.label),directLinks:[{title:"Play",link:null==i?void 0:i.file_url}]})}),{image:(null==c?void 0:c.includes("https"))?c:null==c?void 0:c.replace("http","https"),synopsis:p,title:v,rating:h,imdbId:"",cast:g,tags:f,type:m,linkList:_}}catch(i){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]}}})};exports.getMeta=getMeta;