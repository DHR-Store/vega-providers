"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Referer:"https://google.com","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"},getMeta=async function({link:link,providerContext:providerContext}){try{const{axios:axios,cheerio:cheerio}=providerContext;link.startsWith("http")||(link=new URL(link,"https://ufilmywap.info").href);const res=await axios.get(link,{headers:headers}),$=cheerio.load(res.data);let title=$("h2.wp-block-heading").first().text().trim();title=title.replace(/^Name:\s*/,"")||"Unknown";let synopsis="";$("p.has-small-font-size").each((_,el)=>{const text=$(el).text().trim();if(text.length>40&&!text.toLowerCase().includes("download"))return synopsis=text,!1});let image=$("figure.wp-block-image img").first().attr("src")||"";image&&!image.startsWith("http")&&(image=new URL(image,link).href);const imdbId="",links=[];return $("a.wp-block-button__link").each((_,el)=>{let href=$(el).attr("href")||"";const text=$(el).text().trim()||"Download";if(!href)return;href.startsWith("http")||(href=new URL(href,link).href);const qualityMatch=text.match(/\b(480P|720P|1080P|720PHEVC|HD)\b/i),quality=qualityMatch?qualityMatch[0]:"AUTO";links.push({title:text,directLinks:[{link:href,title:text,quality:quality,type:"movie"}]})}),$("a.wp-block-button__link").each((_,el)=>{const extraPageUrl=$(el).attr("href")||"";if(extraPageUrl.includes("linkmake.in/view/"))try{axios.get(extraPageUrl,{headers:headers}).then(extraRes=>{const $$=cheerio.load(extraRes.data);$$("div.dlink.dl a").each((_,e)=>{var _a;let href=(null===(_a=$$(e).attr("href"))||void 0===_a?void 0:_a.trim())||"";const text=$$(e).find(".dll").text().trim()||"Download";if(!href)return;href.startsWith("http")||(href=new URL(href,extraPageUrl).href);const qualityMatch=text.match(/\b(480p|720p|1080p|HEVC)\b/i),quality=qualityMatch?qualityMatch[0].toUpperCase():"AUTO";links.push({title:text,directLinks:[{link:href,title:text,quality:quality,type:"movie"}]})})})}catch(e){}}),{title:title,synopsis:synopsis,image:image,type:"movie",linkList:links,imdbId:imdbId}}catch(err){return{title:"",synopsis:"",image:"",type:"movie",linkList:[],imdbId:""}}};exports.getMeta=getMeta;