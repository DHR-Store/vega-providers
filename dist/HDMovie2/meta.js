"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const hdbHeaders={Referer:"https://google.com","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0"},getMeta=function(_a){return __awaiter(this,arguments,void 0,function*({link:link,providerContext:providerContext}){var _b,_c;try{const{axios:axios,cheerio:cheerio}=providerContext,res=yield axios.get(link,{headers:hdbHeaders}),$=cheerio.load(res.data),container=$("#single"),title=container.find("h1.entry-title").text().trim()||(null===(_b=$("meta[property='og:title']").attr("content"))||void 0===_b?void 0:_b.replace(" - Hdmovie2","").trim())||"Unknown",type=title.toLowerCase().includes("season")?"series":"movie",image=container.find(".poster img").attr("src")||$("meta[property='og:image']").attr("content")||"";let synopsis="";container.find(".entry-content p").each((_,el)=>{const text=$(el).text().trim();if(text&&!text.includes("Watch Online HD Print"))return synopsis=text,!1});const rating=container.find(".imdb span[itemprop='ratingValue']").text().trim()||"",imdbId=(null===(_c=container.find(".imdb a").attr("href"))||void 0===_c?void 0:_c.split("/")[4])||"",tags=container.find(".sgeneros a").map((_,el)=>$(el).text().trim()).get(),cast=container.find(".cast .person a").map((_,el)=>$(el).text().trim()).get(),linkList=[],playServers=[];container.find("#playeroptionsul li").each((_,el)=>{const linkEl=$(el),linkTitle=linkEl.find(".title").text().trim()||"Server",linkDataPost=linkEl.attr("data-post"),linkDataNume=linkEl.attr("data-nume");linkDataPost&&linkDataNume&&"trailer"!==linkDataNume&&playServers.push({title:linkTitle,link:`https://hdmovie2.careers/wp-json/dooplayer/v2/${linkDataPost}/${linkDataNume}`})}),playServers.length>0&&linkList.push({title:"Play",directLinks:playServers});const downloadLinks=[];return container.find(".dooplay_player .downloads a").each((_,el)=>{var _a;const href=$(el).attr("href"),text=$(el).text().trim();href&&text&&downloadLinks.push({title:text,link:href,quality:(null===(_a=text.match(/\b(480p|720p|1080p|2160p|4k|hd)\b/i))||void 0===_a?void 0:_a[0])||"AUTO"})}),downloadLinks.length>0&&linkList.push({title:"Download",directLinks:downloadLinks}),{title:title,synopsis:synopsis,image:image,imdbId:imdbId,type:type,tags:tags,cast:cast,rating:rating,linkList:linkList}}catch(err){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",tags:[],cast:[],rating:"",linkList:[]}}})};exports.getMeta=getMeta;