"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=getMeta;const API_BASE="http://myavens18052002.xyz/nzapis",HEADERS={api:"553y845hfhdlfhjkl438943943839443943fdhdkfjfj9834lnfd98","Cache-Control":"no-cache",caller:"vion-official-app",Connection:"Keep-Alive",Host:"myavens18052002.xyz","User-Agent":"okhttp/3.14.9"},formatPosterUrl=url=>url?url.startsWith("http")?url:`https://archive.org/download/${url}`:"";async function getMeta({link:link,providerContext:providerContext}){const{axios:axios}=providerContext,[type,idStr]=link.split(":");parseInt(idStr);try{const languages=(await axios.get(`${API_BASE}/nzgetlanguages.php`,{headers:HEADERS})).data,getLangName=langId=>{const lang=languages.find(l=>l.id==langId);return lang?lang.name:"Unknown"};if("show"===type){const show=(await axios.get(`${API_BASE}/nzgetshows.php`,{headers:HEADERS})).data.find(s=>s.id==idStr);if(!show)throw new Error("Show not found");const languageName=getLangName(show.language),synopsis=`${show.des||""}\n\nLanguage: ${languageName}`,seasonsRes=await axios.get(`${API_BASE}/nzgetseasons.php`,{headers:HEADERS}),seasonLinks=seasonsRes.data.filter(s=>s.show_id==idStr).sort((a,b)=>a.no-b.no).map(season=>({title:season.name||`Season ${season.no}`,episodesLink:`season:${season.id}`,directLinks:[]}));return{title:`${show.name} (${languageName})`,imdbId:"",synopsis:synopsis.trim(),image:formatPosterUrl(show.cover||show.thumb),type:"series",tags:[],linkList:seasonLinks}}if("movie"===type){const movie=(await axios.get(`${API_BASE}/nzgetmovies.php`,{headers:HEADERS})).data.find(m=>m.id==idStr);if(!movie)throw new Error("Movie not found");const languageName=getLangName(movie.language),synopsis=`${movie.des||""}\n\nLanguage: ${languageName}`,tags=movie.tags?movie.tags.split(",").map(t=>t.trim()):[];return{title:`${movie.name} (${languageName})`,imdbId:"",synopsis:synopsis.trim(),image:formatPosterUrl(movie.cover||movie.thumb),type:"movie",tags:tags,linkList:[{title:movie.name,episodesLink:"",directLinks:[{title:"Movie",link:`movie:${movie.id}`}]}]}}}catch(err){}return{title:"",imdbId:"",synopsis:"",image:"",type:"movie",tags:[],linkList:[]}}