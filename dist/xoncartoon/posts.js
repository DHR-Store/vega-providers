"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPosts=getPosts,exports.getSearchPosts=getSearchPosts;const API_BASE="http://myavens18052002.xyz/nzapis",HEADERS={api:"553y845hfhdlfhjkl438943943839443943fdhdkfjfj9834lnfd98","Cache-Control":"no-cache",caller:"vion-official-app",Connection:"Keep-Alive",Host:"myavens18052002.xyz","User-Agent":"okhttp/3.14.9"},formatPosterUrl=url=>url?url.startsWith("http")?url:`https://archive.org/download/${url}`:"";async function getPosts({page:page=1,filter:filter,providerContext:providerContext}){const{axios:axios}=providerContext,posts=[],start=20*(page-1),end=start+20;try{if("trending_shows"===filter){const res=await axios.get(`${API_BASE}/nzgetshows.php`,{headers:HEADERS});res.data.slice(start,end).forEach(show=>{posts.push({title:show.name,link:`show:${show.id}`,image:formatPosterUrl(show.cover||show.thumb)})})}else if("latest_episodes"===filter){const res=await axios.get(`${API_BASE}/nzgetepisodes_v2.php?since=`,{headers:HEADERS});res.data.episodes.slice(start,end).forEach(ep=>{posts.push({title:`${ep.name} (Ep ${ep.no})`,link:`episode:${ep.id}`,image:formatPosterUrl(ep.thumb)})})}else if("movies"===filter){const res=await axios.get(`${API_BASE}/nzgetmovies.php`,{headers:HEADERS});res.data.slice(start,end).forEach(movie=>{posts.push({title:movie.name,link:`movie:${movie.id}`,image:formatPosterUrl(movie.cover||movie.thumb)})})}}catch(err){}return posts}async function getSearchPosts({searchQuery:searchQuery,providerContext:providerContext}){const{axios:axios}=providerContext,posts=[],query=searchQuery.toLowerCase();try{(await axios.get(`${API_BASE}/nzgetshows.php`,{headers:HEADERS})).data.forEach(show=>{show.name.toLowerCase().includes(query)&&posts.push({title:show.name,link:`show:${show.id}`,image:formatPosterUrl(show.cover||show.thumb)})});(await axios.get(`${API_BASE}/nzgetmovies.php`,{headers:HEADERS})).data.forEach(movie=>{(movie.name.toLowerCase().includes(query)||movie.tags&&movie.tags.toLowerCase().includes(query))&&posts.push({title:movie.name,link:`movie:${movie.id}`,image:formatPosterUrl(movie.cover||movie.thumb)})})}catch(err){}return posts}