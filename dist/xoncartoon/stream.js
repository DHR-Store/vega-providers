"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;const API_BASE="http://myavens18052002.xyz/nzapis",HEADERS={api:"553y845hfhdlfhjkl438943943839443943fdhdkfjfj9834lnfd98",caller:"vion-official-app",Host:"myavens18052002.xyz","User-Agent":"okhttp/3.14.9"},formatVideoUrl=url=>{if(!url)return"";let finalUrl=url.startsWith("http")?url:`https://archive.org/download/${url}`;return finalUrl.match(/\.mkv$/i)&&(finalUrl=finalUrl.replace(/\.mkv$/i,".mp4")),finalUrl};async function getStream({link:link,providerContext:providerContext}){const{axios:axios}=providerContext,streams=[],[type,idStr]=link.split(":");parseInt(idStr);try{let item=null;if("episode"===type){item=(await axios.get(`${API_BASE}/nzgetepisodes_v2.php?since=`,{headers:HEADERS})).data.episodes.find(e=>e.id==idStr)}else if("movie"===type){item=(await axios.get(`${API_BASE}/nzgetmovies.php`,{headers:HEADERS})).data.find(m=>m.id==idStr)}if(!item)return[];item.basic&&streams.push({server:"Xon Basic (240p)",link:formatVideoUrl(item.basic),type:"mp4"}),item.sd&&streams.push({server:"Xon SD (480p)",link:formatVideoUrl(item.sd),type:"mp4"}),item.hd&&streams.push({server:"Xon HD (720p)",link:formatVideoUrl(item.hd),type:"mp4"}),item.fhd&&streams.push({server:"Xon FHD (1080p)",link:formatVideoUrl(item.fhd),type:"mp4"}),item.link&&streams.push({server:"External Embed",link:item.link,type:"m3u8"})}catch(err){}return streams}