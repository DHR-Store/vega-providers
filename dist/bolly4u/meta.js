"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Referer:"https://google.com","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36"},getMeta=async function({link:link,providerContext:providerContext}){var _a,_b,_c;try{const{axios:axios,cheerio:cheerio}=providerContext,res=await axios.get(link,{headers:headers}),$=cheerio.load(res.data);const title=($("h1").first().text().trim()||(null===(_a=$("meta[property='og:title']").attr("content"))||void 0===_a?void 0:_a.trim())||$("title").text().trim()).replace(/Bolly4u/gi,"").replace(/WB\s*DL/gi,"").replace(/\[.*?\]/g,"").replace(/\(.+?\)/g,"").replace(/\s{2,}/g," ").trim(),type=/season/i.test(title)?"series":"movie",synopsis=$("article p").map((i,el)=>$(el).text().trim()).get().join(" ")||$("meta[name='description']").attr("content")||$("meta[property='og:description']").attr("content")||"",image=$("article img").first().attr("src")||$("article img").first().attr("data-src")||$("meta[property='og:image']").attr("content")||$("img").first().attr("src")||"",imdbId=(null===(_c=null===(_b=$('a[href*="imdb.com/title/tt"]').attr("href"))||void 0===_b?void 0:_b.match(/tt\d+/))||void 0===_c?void 0:_c[0])||"",links=[],directLink=[];$('a:contains("Episode"), a:contains("EPiSODE")').each((_,el)=>{const epTitle=$(el).text().trim(),epLink=$(el).attr("href");epLink&&directLink.push({title:epTitle,link:epLink.startsWith("http")?epLink:new URL(epLink,link).href,type:"episode"})}),0===directLink.length&&$("a").filter((_,el)=>/480|720|1080|2160|4K|mp4|m3u8/i.test($(el).text())).each((_,el)=>{var _a;const movieLink=$(el).attr("href"),linkTitle=$(el).text().trim();movieLink&&links.push({title:linkTitle,quality:(null===(_a=$(el).text().match(/\b(480p|720p|1080p|2160p|4K|mp4|m3u8)\b/i))||void 0===_a?void 0:_a[0])||"",directLinks:[{link:movieLink.startsWith("http")?movieLink:new URL(movieLink,link).href,title:"Movie",type:"movie"}]})}),directLink.length>0&&links.push({title:title,directLinks:directLink});const jsLinks=[...$("script").map((i,el)=>$(el).html()).get().join(" ").matchAll(/https?:\/\/[^'"]+\.(mp4|m3u8)/gi)].map(m=>({link:m[0],title:"Stream",type:"movie"}));return jsLinks.length>0&&links.push({title:title,directLinks:jsLinks}),{title:title,synopsis:synopsis,image:image,imdbId:imdbId,type:type,linkList:links}}catch(err){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]}}};exports.getMeta=getMeta;