"use strict";var __awaiter=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(s,o){function i(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,a)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const getPosts=function(t){return __awaiter(this,arguments,void 0,function*({filter:t,page:e,signal:r,providerContext:n}){const{getBaseUrl:s}=n,o=yield s("filmyfly");return posts({url:`${o+t}/${e}`,signal:r,baseUrl:o,providerContext:n})})};exports.getPosts=getPosts;const getSearchPosts=function(t){return __awaiter(this,arguments,void 0,function*({searchQuery:t,page:e,signal:r,providerContext:n}){const{getBaseUrl:s}=n,o=yield s("filmyfly");return e>1?[]:posts({url:`${o}/site-1.html?to-search=${t}`,signal:r,baseUrl:o,providerContext:n})})};function posts(t){return __awaiter(this,arguments,void 0,function*({url:t,signal:e,baseUrl:r,providerContext:n}){try{const{cheerio:s,commonHeaders:o}=n,i=yield fetch(t,{headers:o,signal:e}),a=yield i.text(),c=s.load(a),l=[];return c(".A2,.A10,.fl").map((t,e)=>{const n=c(e).find("a").eq(1).text()||c(e).find("b").text(),s=c(e).find("a").attr("href"),o=c(e).find("img").attr("src");n&&s&&o&&l.push({title:n,link:r+s,image:o})}),l}catch(t){return[]}})}exports.getSearchPosts=getSearchPosts;