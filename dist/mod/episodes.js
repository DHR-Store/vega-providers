"use strict";var __awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{u(i.next(t))}catch(t){r(t)}}function s(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=void 0;const getEpisodes=function(t){return __awaiter(this,arguments,void 0,function*({url:t,providerContext:e}){var n;const{axios:i,cheerio:o}=e;try{t.includes("url=")&&(t=atob(t.split("url=")[1]));const e=(yield i.get(t)).data;let r=o.load(e);if(t.includes("url=")){const e=null===(n=r("meta[http-equiv='refresh']").attr("content"))||void 0===n?void 0:n.split("url=")[1],a=(yield i.get(e||t)).data;r=o.load(a)}const a=[];return r("h3,h4").map((t,e)=>{const n=r(e).text(),i=r(e).find("a").attr("href");i&&"#"!==i&&a.push({title:n.trim()||"No title found",link:i||""})}),r("a.maxbutton").map((t,e)=>{const n=r(e).children("span").text(),i=r(e).attr("href");i&&"#"!==i&&a.push({title:n.trim()||"No title found",link:i||""})}),a}catch(t){return[]}})};exports.getEpisodes=getEpisodes;