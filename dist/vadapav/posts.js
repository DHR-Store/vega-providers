"use strict";var __awaiter=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(n,i){function s(t){try{c(o.next(t))}catch(t){i(t)}}function a(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const getPosts=function(t){return __awaiter(this,arguments,void 0,function*({filter:t,page:e,signal:r,providerContext:o}){const{getBaseUrl:n,axios:i,cheerio:s}=o,a=yield n("vadapav");if(e>1)return[];return posts({baseUrl:a,url:`${a+t}`,signal:r,axios:i,cheerio:s})})};exports.getPosts=getPosts;const getSearchPosts=function(t){return __awaiter(this,arguments,void 0,function*({searchQuery:t,page:e,signal:r,providerContext:o}){const{getBaseUrl:n,axios:i,cheerio:s}=o,a=yield n("vadapav");if(e>1)return[];return posts({baseUrl:a,url:`${a}/s/${t}`,signal:r,axios:i,cheerio:s})})};function posts(t){return __awaiter(this,arguments,void 0,function*({url:t,signal:e,axios:r,cheerio:o}){try{const n=(yield r.get(t,{signal:e})).data,i=o.load(n),s=[];return i('.directory-entry:not(:contains("Parent Directory"))').map((t,e)=>{var r;const o=i(e).text(),n=i(e).attr("href"),a=(null==o?void 0:o.length)>30?null===(r=null==o?void 0:o.slice(0,30))||void 0===r?void 0:r.replace(/\./g," "):null==o?void 0:o.replace(/\./g," "),c=`https://placehold.jp/23/000000/ffffff/200x400.png?text=${encodeURIComponent(a)}&css=%7B%22background%22%3A%22%20-webkit-gradient(linear%2C%20left%20bottom%2C%20left%20top%2C%20from(%233f3b3b)%2C%20to(%23000000))%22%2C%22text-transform%22%3A%22%20capitalize%22%7D`;o&&n&&s.push({title:o,link:n,image:c})}),s}catch(t){return[]}})}exports.getSearchPosts=getSearchPosts;