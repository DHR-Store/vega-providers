"use strict";var __awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function l(t){try{c(n.next(t))}catch(t){r(t)}}function s(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(l,s)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=void 0;const getEpisodes=function(t){return __awaiter(this,arguments,void 0,function*({url:t,providerContext:e}){const{axios:i,cheerio:n}=e;try{const e=null==t?void 0:t.split("/").slice(0,3).join("/"),o=(yield i.get(t)).data;let r=n.load(o);const l=[];return r('.file-entry:not(:contains("Parent Directory"))').map((t,i)=>{var n,o,s,c,d,a;const u=r(i).attr("href");u&&((null===(n=r(i).text())||void 0===n?void 0:n.includes(".mp4"))||(null===(o=r(i).text())||void 0===o?void 0:o.includes(".mkv")))&&l.push({title:(null===(d=null===(c=null===(s=r(i).text())||void 0===s?void 0:s.match(/E\d+/))||void 0===c?void 0:c[0])||void 0===d?void 0:d.replace("E","Episode "))||t+1+". "+(null===(a=r(i).text())||void 0===a?void 0:a.replace(".mkv","")),link:e+u})}),l}catch(t){return[]}})};exports.getEpisodes=getEpisodes;