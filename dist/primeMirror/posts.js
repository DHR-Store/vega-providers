"use strict";var __awaiter=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))(function(o,n){function s(t){try{p(i.next(t))}catch(t){n(t)}}function a(t){try{p(i.throw(t))}catch(t){n(t)}}function p(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}p((i=i.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const getPosts=function(t){return __awaiter(this,arguments,void 0,function*({filter:t,page:e,providerValue:r,signal:i,providerContext:o}){try{const{getBaseUrl:n,cheerio:s}=o,a=yield n("nfMirror"),p=[];if(e>1)return[];const c=`https://netmirror.zendax.tech/api/net-proxy?${"primeMirror"===r?"isPrime=true":"isPrime=false"}&url=${a+t}`,l=yield fetch(c,{signal:i,method:"GET",credentials:"omit"}),d=yield l.text(),u=s.load(d);return u("a.post-data").map((t,e)=>{const i=u(e).attr("data-post"),o=u(e).find("img").attr("data-src")||"";i&&p.push({title:"",link:a+""+("netflixMirror"===r?"/post.php?id=":"/pv/post.php?id=")+i+"&t="+Math.round((new Date).getTime()/1e3),image:o})}),p}catch(t){return[]}})};exports.getPosts=getPosts;const getSearchPosts=function(t){return __awaiter(this,arguments,void 0,function*({searchQuery:t,page:e,providerValue:r,signal:i,providerContext:o}){var n;const{getBaseUrl:s}=o;try{if(e>1)return[];const o=[],a=yield s("nfMirror"),p=`https://netmirror.zendax.tech/api/net-proxy?${"primeMirror"===r?"isPrime=true":"isPrime=false"}&url=${a}${"netflixMirror"===r?"":"/pv"}/search.php?s=${encodeURI(t)}`,c=yield fetch(p,{signal:i,method:"GET",credentials:"omit"}),l=yield c.json();return null===(n=null==l?void 0:l.searchResult)||void 0===n||n.forEach(t=>{const e=(null==t?void 0:t.t)||"",i=null==t?void 0:t.id,n="netflixMirror"===r?`https://imgcdn.media/poster/v/${i}.jpg`:`https://imgcdn.media/pv/341/${i}.jpg`;i&&o.push({title:e,link:a+""+("netflixMirror"===r?"/mobile/post.php?id=":"/mobile/pv/post.php?id=")+i+"&t="+Math.round((new Date).getTime()/1e3),image:n})}),o}catch(t){return[]}})};exports.getSearchPosts=getSearchPosts;