"use strict";var __awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,l){function r(e){try{a(n.next(e))}catch(e){l(e)}}function s(e){try{a(n.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const getMeta=function(e){return __awaiter(this,arguments,void 0,function*({link:e,providerContext:t}){var i,n,o,l,r;try{const{axios:s,cheerio:a,getBaseUrl:c}=t,d=yield c("protonMovies"),p=(yield s.get(`${d}${e}`)).data;const u=null===(r=null===(l=null===(o=null===(n=null===(i=a.load(p)('script:contains("decodeURIComponent")').text().split(" = "))||void 0===i?void 0:i[1])||void 0===n?void 0:n.split("protomovies"))||void 0===o?void 0:o[0])||void 0===l?void 0:l.trim())||void 0===r?void 0:r.slice(0,-1),v=JSON.parse(u).join("").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\n/g,"\n").replace(/\\t/g,"\t").replace(/\\r/g,"\r").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),f=a.load(v),m=f(".trending-text.fw-bold.texture-text.text-uppercase.my-0.fadeInLeft.animated.d-inline-block").text(),g=f("#thumbnail").attr("src"),x=e.includes("series")?"series":"movie",h=f(".col-12.iq-mb-30.animated.fadeIn").first().text()||f(".description-content").text(),y=f(".p-0.mt-2.list-inline.d-flex.flex-wrap.movie-tag").find("li").map((e,t)=>f(t).text()).slice(0,3).get(),b=[];if("movie"===x){const t=[];t.push({title:"Movie",link:d+e}),b.push({title:"Movie",directLinks:t})}else f("#episodes").children().map((e,t)=>{let i=[];f(t).find(".episode-block").map((e,t)=>{const n=d+f(t).find("a").attr("href")||"",o="Episode "+f(t).find(".episode-number").text().split("E")[1];i.push({title:o,link:n})}),b.push({title:"Season "+(e+1),directLinks:i})});return{image:g||"",imdbId:"",linkList:b,title:m||"",synopsis:h,tags:y,type:x}}catch(e){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]}}})};exports.getMeta=getMeta;