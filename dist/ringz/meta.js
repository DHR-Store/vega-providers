"use strict";var __awaiter=this&&this.__awaiter||function(e,i,t,n){return new(t||(t=Promise))(function(r,l){function o(e){try{u(n.next(e))}catch(e){l(e)}}function s(e){try{u(n.throw(e))}catch(e){l(e)}}function u(e){var i;e.done?r(e.value):(i=e.value,i instanceof t?i:new t(function(e){e(i)})).then(o,s)}u((n=n.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const getMeta=function(e){return __awaiter(this,arguments,void 0,function*({link:e}){var i,t;try{const n=JSON.parse(e),r=(null==n?void 0:n.kn)||(null==n?void 0:n.mn),l=(null==n?void 0:n.IH)||(null==n?void 0:n.IV),o=null==n?void 0:n.gn.split(",").slice(0,3).map(e=>e.trim()),s="webSeries"===(null==n?void 0:n.cg)?"series":"movie",u=[];if("webSeries"===(null==n?void 0:n.cg))null===(i=["1","2","3","4"])||void 0===i||i.forEach(e=>{var i;const t=[];"object"==typeof(null==n?void 0:n["eServer"+e])&&(null===(i=null==Object?void 0:Object.keys(null==n?void 0:n["eServer"+e]))||void 0===i?void 0:i.length)>0&&(Object.keys(null==n?void 0:n["eServer"+e]).forEach(i=>{t.push({title:"Episode "+i,link:JSON.stringify({url:null==n?void 0:n["eServer"+e][i],server:"Server "+e})})}),u.push({title:(null==n?void 0:n.pn)+" (Server "+e+")",directLinks:t}))});else{const e=[];null===(t=["1","2","3","4"])||void 0===t||t.forEach(i=>{(null==n?void 0:n["s"+i])&&e.push({title:"Server "+i+" (HD)",link:JSON.stringify({url:null==n?void 0:n.s1,server:"Server "+i})}),(null==n?void 0:n["4s"+i])&&e.push({title:"Server "+i+" (480p)",link:JSON.stringify({url:null==n?void 0:n["4s"+i],server:"Server "+i})})}),u.push({title:null==n?void 0:n.pn,directLinks:e})}return{title:r,image:l,imdbId:"",synopsis:"",type:s,linkList:u,tags:o}}catch(e){return{title:"",image:"",imdbId:"",synopsis:"",type:"movie",linkList:[],tags:[]}}})};exports.getMeta=getMeta;