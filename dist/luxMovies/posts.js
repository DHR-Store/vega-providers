"use strict";var __awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(a,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function s(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Cache-Control":"no-store","Accept-Language":"en-US,en;q=0.9",DNT:"1","sec-ch-ua":'"Not_A Brand";v="8", "Chromium";v="120", "Microsoft Edge";v="120"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"Sec-Fetch-Dest":"document","Sec-Fetch-Mode":"navigate","Sec-Fetch-Site":"none","Sec-Fetch-User":"?1",Cookie:"ext_name=ojplmecpdpgccookcobabopnaifgidhf; cf_clearance=lDWFqLsHL5LZ.VpfxQRtHY2_mpXRuq3OFTbVDKNIZGw-1752051595-1.2.1.1-VZ2S8yUrcCuOMLUgWfNv9a1LrtuhUKEd.uPN1Au_9tuTFYLra7ugoFBYKfsunvzrBOlYSYM0q8J7vpw.JhGZH0RO6MlaVBKH5olmoryhd6s11LXg7ZF1Ld_NedYoA7uKk_SBhbb1CCsj11S52U9VUve7twrLEjILmw3MEURU1eGqOOi3YGxtGgpQBNYgfnkJCoRkLB_6vQESw4RcIvO1j1BHMuyMVEkbn7sBtLEX52w","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0"},getPosts=e=>__awaiter(void 0,[e],void 0,function*({filter:e,page:t,providerValue:i,signal:o,providerContext:a}){const{getBaseUrl:n}=a;return posts(`${yield n("lux")}/${e}/page/${t}/`,o,a)});exports.getPosts=getPosts;const getSearchPosts=e=>__awaiter(void 0,[e],void 0,function*({searchQuery:e,page:t,providerValue:i,signal:o,providerContext:a}){const{getBaseUrl:n}=a,r=yield n("lux");return posts(1===t?`${r}/?s=${e}`:`${r}/page/${t}/?s=${e}`,o,a)});function posts(e,t,i){return __awaiter(this,void 0,void 0,function*(){var o,a;try{const{axios:n,cheerio:r}=i,s=yield n.get(e,{headers:Object.assign(Object.assign({},headers),{Referer:e}),signal:t}),c=r.load(s.data),d=[];return null===(a=null===(o=c(".blog-items"))||void 0===o?void 0:o.children("article"))||void 0===a||a.each((e,t)=>{var i,o,a,n,r,s,l,u,v,g;const p={title:(null===(r=null===(n=null===(a=null===(o=null===(i=c(t))||void 0===i?void 0:i.find("a"))||void 0===o?void 0:o.attr("title"))||void 0===a?void 0:a.replace("Download",""))||void 0===n?void 0:n.match(/^(.*?)\s*\((\d{4})\)|^(.*?)\s*\((Season \d+)\)/))||void 0===r?void 0:r[0])||(null===(u=null===(l=null===(s=c(t))||void 0===s?void 0:s.find("a"))||void 0===l?void 0:l.attr("title"))||void 0===u?void 0:u.replace("Download",""))||"",link:(null===(g=null===(v=c(t))||void 0===v?void 0:v.find("a"))||void 0===g?void 0:g.attr("href"))||"",image:c(t).find("a").find("img").attr("data-lazy-src")||c(t).find("a").find("img").attr("data-src")||c(t).find("a").find("img").attr("src")||""};p.image.startsWith("//")&&(p.image="https:"+p.image),d.push(p)}),d}catch(e){return[]}})}exports.getSearchPosts=getSearchPosts;