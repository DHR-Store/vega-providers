"use strict";var __awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,a)}c((r=r.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const getPosts=function(t){return __awaiter(this,arguments,void 0,function*({filter:t,page:e,signal:i,providerContext:r}){const{getBaseUrl:n,axios:s,cheerio:o}=r;return posts({url:`${(yield n("w4u"))+t}/page/${e}/`,signal:i,axios:s,cheerio:o})})};exports.getPosts=getPosts;const getSearchPosts=function(t){return __awaiter(this,arguments,void 0,function*({searchQuery:t,page:e,signal:i,providerContext:r}){const{getBaseUrl:n,axios:s,cheerio:o}=r;return posts({url:`${yield n("w4u")}/page/${e}/?s=${t}`,signal:i,axios:s,cheerio:o})})};function posts(t){return __awaiter(this,arguments,void 0,function*({url:t,signal:e,axios:i,cheerio:r}){try{const n=(yield i.get(t,{signal:e})).data,s=r.load(n),o=[];return s(".recent-posts").children().map((t,e)=>{const i=s(e).find(".post-thumb").find("a").attr("title"),r=s(e).find(".post-thumb").find("a").attr("href"),n=s(e).find(".post-thumb").find("img").attr("data-src")||s(e).find(".post-thumb").find("img").attr("src");i&&r&&n&&o.push({title:i.replace("Download","").trim(),link:r,image:n})}),o}catch(t){return[]}})}exports.getSearchPosts=getSearchPosts;