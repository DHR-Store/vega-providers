"use strict";var __awaiter=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(i,s){function n(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(n,a)}c((o=o.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const getPosts=function(t){return __awaiter(this,arguments,void 0,function*({filter:t,page:e,signal:r,providerContext:o}){const{getBaseUrl:i,axios:s,cheerio:n}=o,a=yield i("showbox");return posts({url:`${a+t}?page=${e}/`,signal:r,baseUrl:a,axios:s,cheerio:n})})};exports.getPosts=getPosts;const getSearchPosts=function(t){return __awaiter(this,arguments,void 0,function*({searchQuery:t,page:e,signal:r,providerContext:o}){const{getBaseUrl:i,axios:s,cheerio:n}=o,a=yield i("showbox");return posts({url:`${a}/search?keyword=${t}&page=${e}`,signal:r,baseUrl:a,axios:s,cheerio:n})})};function posts(t){return __awaiter(this,arguments,void 0,function*({url:t,signal:e,axios:r,cheerio:o}){try{const i=(yield r.get(t,{signal:e})).data,s=o.load(i),n=[];return s(".movie-item,.flw-item").map((t,e)=>{const r=s(e).find(".film-name").text().trim(),o=s(e).find("a").attr("href"),i=s(e).find("img").attr("src");r&&o&&i&&n.push({title:r,link:o,image:i})}),n}catch(t){return[]}})}exports.getSearchPosts=getSearchPosts;